<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./assets/css/style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <style>
        :root {
            --body-color: #dde1e7;
            --nav-color: #dde1e7;
            --side-nav: #dde1e7;
            --text-color: #595959;
            --header: #2C3E50;
            --search-bar: #595959;
            --search-text: #595959;
            --hover-txt-color: #1A73E8;
            --box-shadow: -3px -3px 7px #ffffff73,
                2px 2px 5px rgba(94, 101, 121, 0.288);
            --box-inset-shadow: inset 2px 2px 5px #babecc,
                inset -5px -5px 10px #ffffff73;
            --transparent-color: rgba(221, 225, 231, 0.8);
        }

        .container-fluid {
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
     
        }

        .container {
            margin-top: 30px;
            max-width: 380px;
            padding: 15px 15px;
            border-radius: 10px;
            background-color: var(--body-color);
            box-shadow: var(--box-shadow);
        }
        .view h1{
            font-size: 35px;
            font-weight: 800;
            text-align: center;
            margin-bottom: 20px;
            color: var(--header);
        }
        .view label {
            font-size: 25px;
            color: var(--header);
        }
        .view select{
            width: 70%;
            margin-left: 10px;
            min-height: 30px;
            font-size: 20px;
            outline: none;
            border: none;
            border-radius: 5px;
            box-shadow: var(--box-shadow);
        }
        .view select:focus{
            color: #1A73E8;
            box-shadow: var(--box-inset-shadow);
        }
    </style>

</head>

<body>
    <header>
        <nav>
            <div class="nav-logo">
                <a style="text-decoration: none;" href="index.html">
                    RKPY
                </a>
            </div>
            <div class="searchBox">
                <i class='bx bx-menu open'></i>
                <i class='bx bx-x close'></i>
            </div>
            <ul class="header-main">
                <li><a href="index.html" class="active">बिबरन </a></li>
                <li><a href="register.html">नया दर्ता</a></li>
                <li><a href="final.html">समाप्त </a></li>
                <li><a href="https://www.ramkrishna4234.com.np/"> Logout</a></li>

            </ul>

        </nav>
        <!-- light and dark mode -->



    </header>

    <!-- Arrow Top -->
    <div class="arrowTop">
        <a href="#">
            <i class='bx bx-up-arrow-alt slideUp'></i></a>
    </div>



    <div class="container-fluid">
        <div class="container">
            <div class="view">

                <h1>रेकर्ड</h1>
                <label for="nameDropdown">Name:</label>
                <select id="nameDropdown">
                    <option value="">Select a name</option>
                </select>


                <table id="table1" class="table table-hover" style="border: 1px solid var(--hover-txt-color); margin-top: 20px; font-size: 18px;">
                    <!-- Data will be populated here -->
                </table>


                <table id="table2" class="table table-hover" style="border: 1px solid var(--hover-txt-color); margin-top: 20px; font-size: 18px;">
                    <!-- Data will be populated here -->
                </table>

                <!-- <h2>ब्याज चलेको </h2> -->
                <table id="table3" class="table table-hover" style="border: 1px solid var(--hover-txt-color); margin-top: 20px; font-size: 18px;">
                    <!-- Data will be populated here -->
                </table>


                <table id="table4" class="table table-hover" style="border: 1px solid var(--hover-txt-color); font-size: 18px;">
                    <!-- Data will be populated here -->
                </table>

            </div>
        </div>
    </div>








    <script>
        const body = document.querySelector("body"),
            header = document.querySelector("header"),
            nav = document.querySelector("nav"),

            searchBox = document.querySelector(".searchBox"),
            open = document.querySelector(".open"),
            close = document.querySelector(".close"),
            arrowTop = document.querySelector(".arrowTop");

        // nav bar scroll up and down with windows

        let prevScrollpos = window.pageYOffset;
        window.addEventListener("scroll", () => {
            let currentScrollpos = window.pageYOffset;
            if (prevScrollpos < currentScrollpos) {
                header.classList.add("hide");
                arrowTop.classList.add("show");
            } else {
                header.classList.remove("hide");
                arrowTop.classList.remove("show");
            }
            prevScrollpos = currentScrollpos;
        })
        //toggle for nav bar
        searchBox.addEventListener("click", () => {
            searchBox.classList.toggle("active");
            // nav.classList.add("active");
        });


        //for side bar

        open.addEventListener("click", () => {
            nav.classList.add("active");
        })
        body.addEventListener("click", e => {
            let clickedElm = e.target;

            if (!clickedElm.classList.contains("open") && !clickedElm.classList.contains("menu")) {
                nav.classList.remove("active");
                searchBox.classList.remove("active");
            }
        })
        // header finish



        //for view table
        function populateDropdown() {
            fetch('https://script.google.com/macros/s/AKfycbxS5qUMpXpjfOPgx8NYY43KEDVlB2hcM3MKBq5zMtZPae-c2ZyiLhq6nYLSIYX-rYHH/exec')
                .then(response => response.json())
                .then(data => {
                    const dropdown = document.getElementById('nameDropdown');
                    data.forEach(function (name) {
                        let option = document.createElement('option');
                        option.value = name;
                        option.textContent = name;
                        dropdown.appendChild(option);
                    });
                })
                .catch(error => console.error('Error fetching names:', error));
        }
        function formatNumber(number) {
            return number.toString().split('.')[0]; // Remove the decimal part
        }

        function displayData() {
            const selectedName = document.getElementById('nameDropdown').value;
            if (selectedName) {
                fetch(`https://script.google.com/macros/s/AKfycbxS5qUMpXpjfOPgx8NYY43KEDVlB2hcM3MKBq5zMtZPae-c2ZyiLhq6nYLSIYX-rYHH/exec?name=${encodeURIComponent(selectedName)}`)
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('table1').innerHTML = `
                            <tr><th>नाम </th><th>मुल्धन</th><th>ब्याज दर </th></tr>
                            <tr><td>${data.A}</td><td>${data.B}</td><td>${data.C}</td></tr>
                        `;
                        document.getElementById('table2').innerHTML = `
                            <tr><th>रकम लिएको </th><th>रकम बुझौने </th></tr>
                            <tr><td>${data.P}</td><td>${data.Q}</td></tr>
                        `;
                        document.getElementById('table3').innerHTML = `
                            <tr><th>साल </th><th>महिना </th><th>दिन</th></tr>
                            <tr><td>${data.F}</td><td>${data.G}</td><td>${data.H}</td></tr>
                        `;
                        document.getElementById('table4').innerHTML = `
                            <tr><th>जम्मा ब्याज</th><th>जम्मा रकम </th></tr>
                            <tr><td>${data.N}</td><td>${data.O}</td></tr>
                        `;
                    })
                    .catch(error => console.error('Error fetching data:', error));
            }
        }

        window.onload = function () {
            populateDropdown();
            document.getElementById('nameDropdown').addEventListener('change', displayData);
        };
    </script>
</body>

</html>